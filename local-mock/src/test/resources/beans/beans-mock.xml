<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
							http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">

	<!-- 引入基础配置 -->
	<import resource="classpath:tiny-mock/local-mock.xml" />

	<!-- mock切面配置 -->
	<bean id="mockAspect" class="com.cn.kvn.mock.local.MockAspect"
		p:openMock="true" p:needCache="true" p:randomExpRate="4" />

	<aop:config>
		<aop:pointcut id="mockPointCut"
			expression="execution(* com.cn.kvn.mock.local.test..*.*(..))" />
		<aop:aspect ref="mockAspect">
			<aop:around method="aroundAdvice" pointcut-ref="mockPointCut" />
		</aop:aspect>
	</aop:config>


	<!-- 如果只使用mock注解，下面可以不配置。如果要使用配置类型的mock，使用下面注解 -->
	<bean class="com.cn.kvn.mock.local.domain.MockConfig">
		<property name="mockReturnItemList">
			<list>
				<bean class="com.cn.kvn.mock.local.config_mock.MockReturnXmlItem"
					p:mockedMethodFullPath="com.cn.kvn.mock.local.test.ServiceA#method_12()"
					p:returnValue="RANDOM()" scope="prototype" />
				<bean class="com.cn.kvn.mock.local.config_mock.MockReturnXmlItem"
					p:mockedMethodFullPath="com.cn.kvn.mock.local.test.ServiceA#method_13()"
					p:returnValue="123" scope="prototype" />

				<bean class="com.cn.kvn.mock.local.config_mock.MockReturnXmlItem"
					p:mockedMethodFullPath="com.cn.kvn.mock.local.test.ServiceA#method_13(java.lang.String)"
					p:returnValue="456" scope="prototype" />
			</list>
		</property>

		<property name="mockByItemList">
			<list>
				<bean class="com.cn.kvn.mock.local.config_mock.MockByXmlItem"
					p:mockedMethodFullPath="com.cn.kvn.mock.local.test.ServiceA#method_14(java.lang.String,com.cn.kvn.mock.local.test.Foo)"
					p:delegateClass="com.cn.kvn.mock.local.test.MockServiceA"
					p:delegateMethodName="mockMethod_14" p:passParameter="true" scope="prototype" />
			</list>
		</property>

		<property name="mockServerAddress" value="http://localhost:8082" />

		<property name="mockByHttpItemList">
			<list>
				<bean class="com.cn.kvn.mock.local.config_mock.MockByHttpXmlItem"
					p:mockedMethodFullPath="com.cn.kvn.mock.local.test.ServiceA#method_17()"
					scope="prototype" />
			</list>
		</property>

	</bean>

</beans>